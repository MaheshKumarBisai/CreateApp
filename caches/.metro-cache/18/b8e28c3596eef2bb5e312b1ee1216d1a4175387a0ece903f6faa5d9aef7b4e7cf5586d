{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":64},"end":{"line":2,"column":31,"index":95}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":97},"end":{"line":4,"column":66,"index":163}}],"key":"KFIEweWhugyJmWZL0YQ42pa68TE=","exportNames":["*"],"imports":1}},{"name":"./NavigationStateContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":164},"end":{"line":5,"column":62,"index":226}}],"key":"bwI9wPNIrE00l9yVZPhbBS/R6kI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return useOptionsGetters;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopNamespace(_react);\n  var _NavigationBuilderContext = require(_dependencyMap[1], \"./NavigationBuilderContext\");\n  var NavigationBuilderContext = _interopDefault(_NavigationBuilderContext);\n  var _NavigationStateContext = require(_dependencyMap[2], \"./NavigationStateContext\");\n  var NavigationStateContext = _interopDefault(_NavigationStateContext);\n  function useOptionsGetters(_ref) {\n    var key = _ref.key,\n      options = _ref.options,\n      navigation = _ref.navigation;\n    var optionsRef = React.useRef(options);\n    var optionsGettersFromChildRef = React.useRef({});\n    var _React$useContext = React.useContext(NavigationBuilderContext.default),\n      onOptionsChange = _React$useContext.onOptionsChange;\n    var _React$useContext2 = React.useContext(NavigationStateContext.default),\n      parentAddOptionsGetter = _React$useContext2.addOptionsGetter;\n    var optionsChangeListener = React.useCallback(() => {\n      var isFocused = navigation?.isFocused() ?? true;\n      var hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n      if (isFocused && !hasChildren) {\n        onOptionsChange(optionsRef.current ?? {});\n      }\n    }, [navigation, onOptionsChange]);\n    React.useEffect(() => {\n      optionsRef.current = options;\n      optionsChangeListener();\n      return navigation?.addListener('focus', optionsChangeListener);\n    }, [navigation, options, optionsChangeListener]);\n    var getOptionsFromListener = React.useCallback(() => {\n      for (var _key in optionsGettersFromChildRef.current) {\n        if (optionsGettersFromChildRef.current.hasOwnProperty(_key)) {\n          var result = optionsGettersFromChildRef.current[_key]?.();\n\n          // null means unfocused route\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n      return null;\n    }, []);\n    var getCurrentOptions = React.useCallback(() => {\n      var isFocused = navigation?.isFocused() ?? true;\n      if (!isFocused) {\n        return null;\n      }\n      var optionsFromListener = getOptionsFromListener();\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n      return optionsRef.current;\n    }, [navigation, getOptionsFromListener]);\n    React.useEffect(() => {\n      return parentAddOptionsGetter?.(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    var addOptionsGetter = React.useCallback((key, getter) => {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n      return () => {\n        // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    }, [optionsChangeListener]);\n    return {\n      addOptionsGetter,\n      getCurrentOptions\n    };\n  }\n});","lineCount":102,"map":[[27,2,14,15,"Object"],[27,8,14,15],[27,9,14,15,"defineProperty"],[27,23,14,15],[27,24,14,15,"exports"],[27,31,14,15],[28,4,14,15,"enumerable"],[28,14,14,15],[29,4,14,15,"get"],[29,7,14,15],[29,18,14,15,"get"],[29,19,14,15],[30,6,14,15],[30,13,14,15,"useOptionsGetters"],[30,30,14,15],[31,4,14,15],[32,2,14,15],[33,2,2,0],[33,6,2,0,"_react"],[33,12,2,0],[33,15,2,0,"require"],[33,22,2,0],[33,23,2,0,"_dependencyMap"],[33,37,2,0],[34,2,2,0],[34,6,2,0,"React"],[34,11,2,0],[34,14,2,0,"_interopNamespace"],[34,31,2,0],[34,32,2,0,"_react"],[34,38,2,0],[35,2,4,0],[35,6,4,0,"_NavigationBuilderContext"],[35,31,4,0],[35,34,4,0,"require"],[35,41,4,0],[35,42,4,0,"_dependencyMap"],[35,56,4,0],[36,2,4,0],[36,6,4,0,"NavigationBuilderContext"],[36,30,4,0],[36,33,4,0,"_interopDefault"],[36,48,4,0],[36,49,4,0,"_NavigationBuilderContext"],[36,74,4,0],[37,2,5,0],[37,6,5,0,"_NavigationStateContext"],[37,29,5,0],[37,32,5,0,"require"],[37,39,5,0],[37,40,5,0,"_dependencyMap"],[37,54,5,0],[38,2,5,0],[38,6,5,0,"NavigationStateContext"],[38,28,5,0],[38,31,5,0,"_interopDefault"],[38,46,5,0],[38,47,5,0,"_NavigationStateContext"],[38,70,5,0],[39,2,14,15],[39,11,14,24,"useOptionsGetters"],[39,28,14,41,"useOptionsGetters"],[39,29,14,41,"_ref"],[39,33,14,41],[39,35,18,12],[40,4,18,12],[40,8,15,2,"key"],[40,11,15,5],[40,14,15,5,"_ref"],[40,18,15,5],[40,19,15,2,"key"],[40,22,15,5],[41,6,16,2,"options"],[41,13,16,9],[41,16,16,9,"_ref"],[41,20,16,9],[41,21,16,2,"options"],[41,28,16,9],[42,6,17,2,"navigation"],[42,16,17,12],[42,19,17,12,"_ref"],[42,23,17,12],[42,24,17,2,"navigation"],[42,34,17,12],[43,4,19,2],[43,8,19,8,"optionsRef"],[43,18,19,18],[43,21,19,21,"React"],[43,26,19,26],[43,27,19,27,"useRef"],[43,33,19,33],[43,34,19,54,"options"],[43,41,19,61],[43,42,19,62],[44,4,20,2],[44,8,20,8,"optionsGettersFromChildRef"],[44,34,20,34],[44,37,20,37,"React"],[44,42,20,42],[44,43,20,43,"useRef"],[44,49,20,49],[44,50,22,4],[44,51,22,5],[44,52,22,6],[44,53,22,7],[45,4,24,2],[45,8,24,2,"_React$useContext"],[45,25,24,2],[45,28,24,30,"React"],[45,33,24,35],[45,34,24,36,"useContext"],[45,44,24,46],[45,45,24,47,"NavigationBuilderContext"],[45,69,24,71],[45,70,24,71,"default"],[45,77,24,71],[45,78,24,72],[46,6,24,10,"onOptionsChange"],[46,21,24,25],[46,24,24,25,"_React$useContext"],[46,41,24,25],[46,42,24,10,"onOptionsChange"],[46,57,24,25],[47,4,25,2],[47,8,25,2,"_React$useContext2"],[47,26,25,2],[47,29,25,55,"React"],[47,34,25,60],[47,35,25,61,"useContext"],[47,45,25,71],[47,46,26,4,"NavigationStateContext"],[47,68,26,26],[47,69,26,26,"default"],[47,76,27,2],[47,77,27,3],[48,6,25,28,"parentAddOptionsGetter"],[48,28,25,50],[48,31,25,50,"_React$useContext2"],[48,49,25,50],[48,50,25,10,"addOptionsGetter"],[48,66,25,26],[49,4,29,2],[49,8,29,8,"optionsChangeListener"],[49,29,29,29],[49,32,29,32,"React"],[49,37,29,37],[49,38,29,38,"useCallback"],[49,49,29,49],[49,50,29,50],[49,56,29,56],[50,6,30,4],[50,10,30,10,"isFocused"],[50,19,30,19],[50,22,30,22,"navigation"],[50,32,30,32],[50,34,30,34,"isFocused"],[50,43,30,43],[50,44,30,44],[50,45,30,45],[50,49,30,49],[50,53,30,53],[51,6,31,4],[51,10,31,10,"hasChildren"],[51,21,31,21],[51,24,31,24,"Object"],[51,30,31,30],[51,31,31,31,"keys"],[51,35,31,35],[51,36,31,36,"optionsGettersFromChildRef"],[51,62,31,62],[51,63,31,63,"current"],[51,70,31,70],[51,71,31,71],[51,72,31,72,"length"],[51,78,31,78],[52,6,33,4],[52,10,33,8,"isFocused"],[52,19,33,17],[52,23,33,21],[52,24,33,22,"hasChildren"],[52,35,33,33],[52,37,33,35],[53,8,34,6,"onOptionsChange"],[53,23,34,21],[53,24,34,22,"optionsRef"],[53,34,34,32],[53,35,34,33,"current"],[53,42,34,40],[53,46,34,44],[53,47,34,45],[53,48,34,46],[53,49,34,47],[54,6,35,4],[55,4,36,2],[55,5,36,3],[55,7,36,5],[55,8,36,6,"navigation"],[55,18,36,16],[55,20,36,18,"onOptionsChange"],[55,35,36,33],[55,36,36,34],[55,37,36,35],[56,4,38,2,"React"],[56,9,38,7],[56,10,38,8,"useEffect"],[56,19,38,17],[56,20,38,18],[56,26,38,24],[57,6,39,4,"optionsRef"],[57,16,39,14],[57,17,39,15,"current"],[57,24,39,22],[57,27,39,25,"options"],[57,34,39,32],[58,6,40,4,"optionsChangeListener"],[58,27,40,25],[58,28,40,26],[58,29,40,27],[59,6,42,4],[59,13,42,11,"navigation"],[59,23,42,21],[59,25,42,23,"addListener"],[59,36,42,34],[59,37,42,35],[59,44,42,42],[59,46,42,44,"optionsChangeListener"],[59,67,42,65],[59,68,42,66],[60,4,43,2],[60,5,43,3],[60,7,43,5],[60,8,43,6,"navigation"],[60,18,43,16],[60,20,43,18,"options"],[60,27,43,25],[60,29,43,27,"optionsChangeListener"],[60,50,43,48],[60,51,43,49],[60,52,43,50],[61,4,45,2],[61,8,45,8,"getOptionsFromListener"],[61,30,45,30],[61,33,45,33,"React"],[61,38,45,38],[61,39,45,39,"useCallback"],[61,50,45,50],[61,51,45,51],[61,57,45,57],[62,6,46,4],[62,11,46,9],[62,15,46,13,"key"],[62,19,46,16],[62,23,46,20,"optionsGettersFromChildRef"],[62,49,46,46],[62,50,46,47,"current"],[62,57,46,54],[62,59,46,56],[63,8,47,6],[63,12,47,10,"optionsGettersFromChildRef"],[63,38,47,36],[63,39,47,37,"current"],[63,46,47,44],[63,47,47,45,"hasOwnProperty"],[63,61,47,59],[63,62,47,60,"key"],[63,66,47,63],[63,67,47,64],[63,69,47,66],[64,10,48,8],[64,14,48,14,"result"],[64,20,48,20],[64,23,48,23,"optionsGettersFromChildRef"],[64,49,48,49],[64,50,48,50,"current"],[64,57,48,57],[64,58,48,58,"key"],[64,62,48,61],[64,63,48,62],[64,66,48,65],[64,67,48,66],[66,10,50,8],[67,10,51,8],[67,14,51,12,"result"],[67,20,51,18],[67,25,51,23],[67,29,51,27],[67,31,51,29],[68,12,52,10],[68,19,52,17,"result"],[68,25,52,23],[69,10,53,8],[70,8,54,6],[71,6,55,4],[72,6,57,4],[72,13,57,11],[72,17,57,15],[73,4,58,2],[73,5,58,3],[73,7,58,5],[73,9,58,7],[73,10,58,8],[74,4,60,2],[74,8,60,8,"getCurrentOptions"],[74,25,60,25],[74,28,60,28,"React"],[74,33,60,33],[74,34,60,34,"useCallback"],[74,45,60,45],[74,46,60,46],[74,52,60,52],[75,6,61,4],[75,10,61,10,"isFocused"],[75,19,61,19],[75,22,61,22,"navigation"],[75,32,61,32],[75,34,61,34,"isFocused"],[75,43,61,43],[75,44,61,44],[75,45,61,45],[75,49,61,49],[75,53,61,53],[76,6,63,4],[76,10,63,8],[76,11,63,9,"isFocused"],[76,20,63,18],[76,22,63,20],[77,8,64,6],[77,15,64,13],[77,19,64,17],[78,6,65,4],[79,6,67,4],[79,10,67,10,"optionsFromListener"],[79,29,67,29],[79,32,67,32,"getOptionsFromListener"],[79,54,67,54],[79,55,67,55],[79,56,67,56],[80,6,69,4],[80,10,69,8,"optionsFromListener"],[80,29,69,27],[80,34,69,32],[80,38,69,36],[80,40,69,38],[81,8,70,6],[81,15,70,13,"optionsFromListener"],[81,34,70,32],[82,6,71,4],[83,6,73,4],[83,13,73,11,"optionsRef"],[83,23,73,21],[83,24,73,22,"current"],[83,31,73,29],[84,4,74,2],[84,5,74,3],[84,7,74,5],[84,8,74,6,"navigation"],[84,18,74,16],[84,20,74,18,"getOptionsFromListener"],[84,42,74,40],[84,43,74,41],[84,44,74,42],[85,4,76,2,"React"],[85,9,76,7],[85,10,76,8,"useEffect"],[85,19,76,17],[85,20,76,18],[85,26,76,24],[86,6,77,4],[86,13,77,11,"parentAddOptionsGetter"],[86,35,77,33],[86,38,77,36,"key"],[86,41,77,39],[86,43,77,42,"getCurrentOptions"],[86,60,77,59],[86,61,77,60],[87,4,78,2],[87,5,78,3],[87,7,78,5],[87,8,78,6,"getCurrentOptions"],[87,25,78,23],[87,27,78,25,"parentAddOptionsGetter"],[87,49,78,47],[87,51,78,49,"key"],[87,54,78,52],[87,55,78,53],[87,56,78,54],[88,4,80,2],[88,8,80,8,"addOptionsGetter"],[88,24,80,24],[88,27,80,27,"React"],[88,32,80,32],[88,33,80,33,"useCallback"],[88,44,80,44],[88,45,81,4],[88,46,81,5,"key"],[88,49,81,16],[88,51,81,18,"getter"],[88,57,81,57],[88,62,81,62],[89,6,82,6,"optionsGettersFromChildRef"],[89,32,82,32],[89,33,82,33,"current"],[89,40,82,40],[89,41,82,41,"key"],[89,44,82,44],[89,45,82,45],[89,48,82,48,"getter"],[89,54,82,54],[90,6,83,6,"optionsChangeListener"],[90,27,83,27],[90,28,83,28],[90,29,83,29],[91,6,85,6],[91,13,85,13],[91,19,85,19],[92,8,86,8],[93,8,87,8],[93,15,87,15,"optionsGettersFromChildRef"],[93,41,87,41],[93,42,87,42,"current"],[93,49,87,49],[93,50,87,50,"key"],[93,53,87,53],[93,54,87,54],[94,8,88,8,"optionsChangeListener"],[94,29,88,29],[94,30,88,30],[94,31,88,31],[95,6,89,6],[95,7,89,7],[96,4,90,4],[96,5,90,5],[96,7,91,4],[96,8,91,5,"optionsChangeListener"],[96,29,91,26],[96,30,92,2],[96,31,92,3],[97,4,94,2],[97,11,94,9],[98,6,95,4,"addOptionsGetter"],[98,22,95,20],[99,6,96,4,"getCurrentOptions"],[100,4,97,2],[100,5,97,3],[101,2,98,0],[102,0,98,1],[102,3]],"functionMap":{"names":["<global>","useOptionsGetters","optionsChangeListener","React.useEffect$argument_0","getOptionsFromListener","getCurrentOptions","addOptionsGetter","<anonymous>"],"mappings":"AAA;eCa;kDCe;GDO;kBEE;GFK;mDGE;GHa;8CIE;GJc;kBEE;GFE;IKG;aCI;ODI;KLC;CDQ"},"hasCjsExports":false},"type":"js/module"}]}