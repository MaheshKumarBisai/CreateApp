{"dependencies":[{"name":"./EmitterSubscription.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":14,"column":26,"index":414},"end":{"line":14,"column":61,"index":449}}],"key":"/t7kN0qZiyUwY/9AHXofkN8E5Hc=","exportNames":["*"],"imports":1}},{"name":"./EventSubscriptionVendor.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":30,"index":482},"end":{"line":16,"column":69,"index":521}}],"key":"siThVk1MqTi4/oz9mcviAKSpY+M=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":18,"column":16,"index":540},"end":{"line":18,"column":45,"index":569}}],"key":"ePiUN85REKH0vTLGPPDgdWgjFww=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/emptyFunction","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":20,"column":20,"index":592},"end":{"line":20,"column":53,"index":625}}],"key":"xsWlpVC9OqvGVUUEQABZhahH5C0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  /**\r\n   * Copyright (c) 2014-present, Facebook, Inc.\r\n   * All rights reserved.\r\n   *\r\n   * This source code is licensed under the BSD-style license found in the\r\n   * LICENSE file in the root directory of this source tree. An additional grant\r\n   * of patent rights can be found in the PATENTS file in the same directory.\r\n   *\r\n   * @providesModule BaseEventEmitter\r\n   * @typechecks\r\n   */\n  var EmitterSubscription = require(_dependencyMap[0], \"./EmitterSubscription.js\");\n  var EventSubscriptionVendor = require(_dependencyMap[1], \"./EventSubscriptionVendor.js\");\n  var invariant = require(_dependencyMap[2], \"fbjs/lib/invariant\");\n  var emptyFunction = require(_dependencyMap[3], \"fbjs/lib/emptyFunction\");\n  /**\r\n   * @class BaseEventEmitter\r\n   * @description\r\n   * An EventEmitter is responsible for managing a set of listeners and publishing\r\n   * events to them when it is told that such events happened. In addition to the\r\n   * data for the given event it also sends a event control object which allows\r\n   * the listeners/handlers to prevent the default behavior of the given event.\r\n   *\r\n   * The emitter is designed to be generic enough to support all the different\r\n   * contexts in which one might want to emit events. It is a simple multicast\r\n   * mechanism on top of which extra functionality can be composed. For example, a\r\n   * more advanced emitter may use an EventHolder and EventFactory.\r\n   */\n\n  var BaseEventEmitter = /*#__PURE__*/function () {\n    /**\r\n     * @constructor\r\n     */\n    function BaseEventEmitter() {\n      this._subscriber = new EventSubscriptionVendor();\n      this._currentSubscription = null;\n    }\n    /**\r\n     * Adds a listener to be invoked when events of the specified type are\r\n     * emitted. An optional calling context may be provided. The data arguments\r\n     * emitted will be passed to the listener function.\r\n     *\r\n     * TODO: Annotate the listener arg's type. This is tricky because listeners\r\n     *       can be invoked with varargs.\r\n     *\r\n     * @param {string} eventType - Name of the event to listen to\r\n     * @param {function} listener - Function to invoke when the specified event is\r\n     *   emitted\r\n     * @param {*} context - Optional context object to use when invoking the\r\n     *   listener\r\n     */\n\n    var _proto = BaseEventEmitter.prototype;\n    _proto.addListener = function addListener(eventType, listener, context) {\n      return this._subscriber.addSubscription(eventType, new EmitterSubscription(this._subscriber, listener, context));\n    }\n    /**\r\n     * Similar to addListener, except that the listener is removed after it is\r\n     * invoked once.\r\n     *\r\n     * @param {string} eventType - Name of the event to listen to\r\n     * @param {function} listener - Function to invoke only once when the\r\n     *   specified event is emitted\r\n     * @param {*} context - Optional context object to use when invoking the\r\n     *   listener\r\n     */;\n    _proto.once = function once(eventType, listener, context) {\n      var emitter = this;\n      return this.addListener(eventType, function () {\n        emitter.removeCurrentListener();\n        listener.apply(context, arguments);\n      });\n    }\n    /**\r\n     * Removes all of the registered listeners, including those registered as\r\n     * listener maps.\r\n     *\r\n     * @param {?string} eventType - Optional name of the event whose registered\r\n     *   listeners to remove\r\n     */;\n    _proto.removeAllListeners = function removeAllListeners(eventType) {\n      this._subscriber.removeAllSubscriptions(eventType);\n    }\n    /**\r\n     * Provides an API that can be called during an eventing cycle to remove the\r\n     * last listener that was invoked. This allows a developer to provide an event\r\n     * object that can remove the listener (or listener map) during the\r\n     * invocation.\r\n     *\r\n     * If it is called when not inside of an emitting cycle it will throw.\r\n     *\r\n     * @throws {Error} When called not during an eventing cycle\r\n     *\r\n     * @example\r\n     *   var subscription = emitter.addListenerMap({\r\n     *     someEvent: function(data, event) {\r\n     *       console.log(data);\r\n     *       emitter.removeCurrentListener();\r\n     *     }\r\n     *   });\r\n     *\r\n     *   emitter.emit('someEvent', 'abc'); // logs 'abc'\r\n     *   emitter.emit('someEvent', 'def'); // does not log anything\r\n     */;\n    _proto.removeCurrentListener = function removeCurrentListener() {\n      !!!this._currentSubscription ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Not in an emitting cycle; there is no current subscription') : invariant(false) : void 0;\n      this._subscriber.removeSubscription(this._currentSubscription);\n    }\n    /**\r\n     * Returns an array of listeners that are currently registered for the given\r\n     * event.\r\n     *\r\n     * @param {string} eventType - Name of the event to query\r\n     * @return {array}\r\n     */;\n    _proto.listeners = function listeners(eventType) /* TODO: Array<EventSubscription> */\n    {\n      var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n      return subscriptions ? subscriptions.filter(emptyFunction.thatReturnsTrue).map(function (subscription) {\n        return subscription.listener;\n      }) : [];\n    }\n    /**\r\n     * Emits an event of the given type with the given data. All handlers of that\r\n     * particular type will be notified.\r\n     *\r\n     * @param {string} eventType - Name of the event to emit\r\n     * @param {*} Arbitrary arguments to be passed to each registered listener\r\n     *\r\n     * @example\r\n     *   emitter.addListener('someEvent', function(message) {\r\n     *     console.log(message);\r\n     *   });\r\n     *\r\n     *   emitter.emit('someEvent', 'abc'); // logs 'abc'\r\n     */;\n    _proto.emit = function emit(eventType) {\n      var subscriptions = this._subscriber.getSubscriptionsForType(eventType);\n      if (subscriptions) {\n        var keys = Object.keys(subscriptions);\n        for (var ii = 0; ii < keys.length; ii++) {\n          var key = keys[ii];\n          var subscription = subscriptions[key]; // The subscription may have been removed during this event loop.\n\n          if (subscription) {\n            this._currentSubscription = subscription;\n            this.__emitToSubscription.apply(this, [subscription].concat(Array.prototype.slice.call(arguments)));\n          }\n        }\n        this._currentSubscription = null;\n      }\n    }\n    /**\r\n     * Provides a hook to override how the emitter emits an event to a specific\r\n     * subscription. This allows you to set up logging and error boundaries\r\n     * specific to your environment.\r\n     *\r\n     * @param {EmitterSubscription} subscription\r\n     * @param {string} eventType\r\n     * @param {*} Arbitrary arguments to be passed to each registered listener\r\n     */;\n    _proto.__emitToSubscription = function __emitToSubscription(subscription, eventType) {\n      var args = Array.prototype.slice.call(arguments, 2);\n      subscription.listener.apply(subscription.context, args);\n    };\n    return BaseEventEmitter;\n  }();\n  module.exports = BaseEventEmitter;\n});","lineCount":172,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,0,8,0],[10,0,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,2,14,0],[15,6,14,4,"EmitterSubscription"],[15,25,14,23],[15,28,14,26,"require"],[15,35,14,33],[15,36,14,33,"_dependencyMap"],[15,50,14,33],[15,81,14,60],[15,82,14,61],[16,2,16,0],[16,6,16,4,"EventSubscriptionVendor"],[16,29,16,27],[16,32,16,30,"require"],[16,39,16,37],[16,40,16,37,"_dependencyMap"],[16,54,16,37],[16,89,16,68],[16,90,16,69],[17,2,18,0],[17,6,18,4,"invariant"],[17,15,18,13],[17,18,18,16,"require"],[17,25,18,23],[17,26,18,23,"_dependencyMap"],[17,40,18,23],[17,65,18,44],[17,66,18,45],[18,2,20,0],[18,6,20,4,"emptyFunction"],[18,19,20,17],[18,22,20,20,"require"],[18,29,20,27],[18,30,20,27,"_dependencyMap"],[18,44,20,27],[18,73,20,52],[18,74,20,53],[19,2,21,0],[20,0,22,0],[21,0,23,0],[22,0,24,0],[23,0,25,0],[24,0,26,0],[25,0,27,0],[26,0,28,0],[27,0,29,0],[28,0,30,0],[29,0,31,0],[30,0,32,0],[31,0,33,0],[33,2,36,0],[33,6,36,4,"BaseEventEmitter"],[33,22,36,20],[33,25,36,23],[33,38,36,36],[33,50,36,48],[34,4,37,2],[35,0,38,0],[36,0,39,0],[37,4,40,2],[37,13,40,11,"BaseEventEmitter"],[37,29,40,27,"BaseEventEmitter"],[37,30,40,27],[37,32,40,30],[38,6,41,4],[38,10,41,8],[38,11,41,9,"_subscriber"],[38,22,41,20],[38,25,41,23],[38,29,41,27,"EventSubscriptionVendor"],[38,52,41,50],[38,53,41,51],[38,54,41,52],[39,6,42,4],[39,10,42,8],[39,11,42,9,"_currentSubscription"],[39,31,42,29],[39,34,42,32],[39,38,42,36],[40,4,43,2],[41,4,44,2],[42,0,45,0],[43,0,46,0],[44,0,47,0],[45,0,48,0],[46,0,49,0],[47,0,50,0],[48,0,51,0],[49,0,52,0],[50,0,53,0],[51,0,54,0],[52,0,55,0],[53,0,56,0],[54,0,57,0],[56,4,60,2],[56,8,60,6,"_proto"],[56,14,60,12],[56,17,60,15,"BaseEventEmitter"],[56,33,60,31],[56,34,60,32,"prototype"],[56,43,60,41],[57,4,62,2,"_proto"],[57,10,62,8],[57,11,62,9,"addListener"],[57,22,62,20],[57,25,62,23],[57,34,62,32,"addListener"],[57,45,62,43,"addListener"],[57,46,62,44,"eventType"],[57,55,62,53],[57,57,62,55,"listener"],[57,65,62,63],[57,67,62,65,"context"],[57,74,62,72],[57,76,62,74],[58,6,63,4],[58,13,63,11],[58,17,63,15],[58,18,63,16,"_subscriber"],[58,29,63,27],[58,30,63,28,"addSubscription"],[58,45,63,43],[58,46,63,44,"eventType"],[58,55,63,53],[58,57,63,55],[58,61,63,59,"EmitterSubscription"],[58,80,63,78],[58,81,63,79],[58,85,63,83],[58,86,63,84,"_subscriber"],[58,97,63,95],[58,99,63,97,"listener"],[58,107,63,105],[58,109,63,107,"context"],[58,116,63,114],[58,117,63,115],[58,118,63,116],[59,4,64,2],[60,4,65,2],[61,0,66,0],[62,0,67,0],[63,0,68,0],[64,0,69,0],[65,0,70,0],[66,0,71,0],[67,0,72,0],[68,0,73,0],[69,0,74,0],[69,7,65,2],[70,4,77,2,"_proto"],[70,10,77,8],[70,11,77,9,"once"],[70,15,77,13],[70,18,77,16],[70,27,77,25,"once"],[70,31,77,29,"once"],[70,32,77,30,"eventType"],[70,41,77,39],[70,43,77,41,"listener"],[70,51,77,49],[70,53,77,51,"context"],[70,60,77,58],[70,62,77,60],[71,6,78,4],[71,10,78,8,"emitter"],[71,17,78,15],[71,20,78,18],[71,24,78,22],[72,6,79,4],[72,13,79,11],[72,17,79,15],[72,18,79,16,"addListener"],[72,29,79,27],[72,30,79,28,"eventType"],[72,39,79,37],[72,41,79,39],[72,53,79,51],[73,8,80,6,"emitter"],[73,15,80,13],[73,16,80,14,"removeCurrentListener"],[73,37,80,35],[73,38,80,36],[73,39,80,37],[74,8,81,6,"listener"],[74,16,81,14],[74,17,81,15,"apply"],[74,22,81,20],[74,23,81,21,"context"],[74,30,81,28],[74,32,81,30,"arguments"],[74,41,81,39],[74,42,81,40],[75,6,82,4],[75,7,82,5],[75,8,82,6],[76,4,83,2],[77,4,84,2],[78,0,85,0],[79,0,86,0],[80,0,87,0],[81,0,88,0],[82,0,89,0],[83,0,90,0],[83,7,84,2],[84,4,93,2,"_proto"],[84,10,93,8],[84,11,93,9,"removeAllListeners"],[84,29,93,27],[84,32,93,30],[84,41,93,39,"removeAllListeners"],[84,59,93,57,"removeAllListeners"],[84,60,93,58,"eventType"],[84,69,93,67],[84,71,93,69],[85,6,94,4],[85,10,94,8],[85,11,94,9,"_subscriber"],[85,22,94,20],[85,23,94,21,"removeAllSubscriptions"],[85,45,94,43],[85,46,94,44,"eventType"],[85,55,94,53],[85,56,94,54],[86,4,95,2],[87,4,96,2],[88,0,97,0],[89,0,98,0],[90,0,99,0],[91,0,100,0],[92,0,101,0],[93,0,102,0],[94,0,103,0],[95,0,104,0],[96,0,105,0],[97,0,106,0],[98,0,107,0],[99,0,108,0],[100,0,109,0],[101,0,110,0],[102,0,111,0],[103,0,112,0],[104,0,113,0],[105,0,114,0],[106,0,115,0],[107,0,116,0],[107,7,96,2],[108,4,119,2,"_proto"],[108,10,119,8],[108,11,119,9,"removeCurrentListener"],[108,32,119,30],[108,35,119,33],[108,44,119,42,"removeCurrentListener"],[108,65,119,63,"removeCurrentListener"],[108,66,119,63],[108,68,119,66],[109,6,120,4],[109,7,120,5],[109,8,120,6],[109,9,120,7],[109,13,120,11],[109,14,120,12,"_currentSubscription"],[109,34,120,32],[109,37,120,35,"process"],[109,44,120,42],[109,45,120,43,"env"],[109,48,120,46],[109,49,120,47,"NODE_ENV"],[109,57,120,55],[109,62,120,60],[109,74,120,72],[109,77,120,75,"invariant"],[109,86,120,84],[109,87,120,85],[109,92,120,90],[109,94,120,92],[109,154,120,152],[109,155,120,153],[109,158,120,156,"invariant"],[109,167,120,165],[109,168,120,166],[109,173,120,171],[109,174,120,172],[109,177,120,175],[109,182,120,180],[109,183,120,181],[110,6,122,4],[110,10,122,8],[110,11,122,9,"_subscriber"],[110,22,122,20],[110,23,122,21,"removeSubscription"],[110,41,122,39],[110,42,122,40],[110,46,122,44],[110,47,122,45,"_currentSubscription"],[110,67,122,65],[110,68,122,66],[111,4,123,2],[112,4,124,2],[113,0,125,0],[114,0,126,0],[115,0,127,0],[116,0,128,0],[117,0,129,0],[118,0,130,0],[118,7,124,2],[119,4,133,2,"_proto"],[119,10,133,8],[119,11,133,9,"listeners"],[119,20,133,18],[119,23,133,21],[119,32,133,30,"listeners"],[119,41,133,39,"listeners"],[119,42,133,40,"eventType"],[119,51,133,49],[119,53,134,2],[120,4,135,2],[121,6,136,4],[121,10,136,8,"subscriptions"],[121,23,136,21],[121,26,136,24],[121,30,136,28],[121,31,136,29,"_subscriber"],[121,42,136,40],[121,43,136,41,"getSubscriptionsForType"],[121,66,136,64],[121,67,136,65,"eventType"],[121,76,136,74],[121,77,136,75],[122,6,138,4],[122,13,138,11,"subscriptions"],[122,26,138,24],[122,29,138,27,"subscriptions"],[122,42,138,40],[122,43,138,41,"filter"],[122,49,138,47],[122,50,138,48,"emptyFunction"],[122,63,138,61],[122,64,138,62,"thatReturnsTrue"],[122,79,138,77],[122,80,138,78],[122,81,138,79,"map"],[122,84,138,82],[122,85,138,83],[122,95,138,93,"subscription"],[122,107,138,105],[122,109,138,107],[123,8,139,6],[123,15,139,13,"subscription"],[123,27,139,25],[123,28,139,26,"listener"],[123,36,139,34],[124,6,140,4],[124,7,140,5],[124,8,140,6],[124,11,140,9],[124,13,140,11],[125,4,141,2],[126,4,142,2],[127,0,143,0],[128,0,144,0],[129,0,145,0],[130,0,146,0],[131,0,147,0],[132,0,148,0],[133,0,149,0],[134,0,150,0],[135,0,151,0],[136,0,152,0],[137,0,153,0],[138,0,154,0],[139,0,155,0],[139,7,142,2],[140,4,158,2,"_proto"],[140,10,158,8],[140,11,158,9,"emit"],[140,15,158,13],[140,18,158,16],[140,27,158,25,"emit"],[140,31,158,29,"emit"],[140,32,158,30,"eventType"],[140,41,158,39],[140,43,158,41],[141,6,159,4],[141,10,159,8,"subscriptions"],[141,23,159,21],[141,26,159,24],[141,30,159,28],[141,31,159,29,"_subscriber"],[141,42,159,40],[141,43,159,41,"getSubscriptionsForType"],[141,66,159,64],[141,67,159,65,"eventType"],[141,76,159,74],[141,77,159,75],[142,6,161,4],[142,10,161,8,"subscriptions"],[142,23,161,21],[142,25,161,23],[143,8,162,6],[143,12,162,10,"keys"],[143,16,162,14],[143,19,162,17,"Object"],[143,25,162,23],[143,26,162,24,"keys"],[143,30,162,28],[143,31,162,29,"subscriptions"],[143,44,162,42],[143,45,162,43],[144,8,164,6],[144,13,164,11],[144,17,164,15,"ii"],[144,19,164,17],[144,22,164,20],[144,23,164,21],[144,25,164,23,"ii"],[144,27,164,25],[144,30,164,28,"keys"],[144,34,164,32],[144,35,164,33,"length"],[144,41,164,39],[144,43,164,41,"ii"],[144,45,164,43],[144,47,164,45],[144,49,164,47],[145,10,165,8],[145,14,165,12,"key"],[145,17,165,15],[145,20,165,18,"keys"],[145,24,165,22],[145,25,165,23,"ii"],[145,27,165,25],[145,28,165,26],[146,10,166,8],[146,14,166,12,"subscription"],[146,26,166,24],[146,29,166,27,"subscriptions"],[146,42,166,40],[146,43,166,41,"key"],[146,46,166,44],[146,47,166,45],[146,48,166,46],[146,49,166,47],[148,10,168,8],[148,14,168,12,"subscription"],[148,26,168,24],[148,28,168,26],[149,12,169,10],[149,16,169,14],[149,17,169,15,"_currentSubscription"],[149,37,169,35],[149,40,169,38,"subscription"],[149,52,169,50],[150,12,171,10],[150,16,171,14],[150,17,171,15,"__emitToSubscription"],[150,37,171,35],[150,38,171,36,"apply"],[150,43,171,41],[150,44,171,42],[150,48,171,46],[150,50,171,48],[150,51,171,49,"subscription"],[150,63,171,61],[150,64,171,62],[150,65,171,63,"concat"],[150,71,171,69],[150,72,171,70,"Array"],[150,77,171,75],[150,78,171,76,"prototype"],[150,87,171,85],[150,88,171,86,"slice"],[150,93,171,91],[150,94,171,92,"call"],[150,98,171,96],[150,99,171,97,"arguments"],[150,108,171,106],[150,109,171,107],[150,110,171,108],[150,111,171,109],[151,10,172,8],[152,8,173,6],[153,8,175,6],[153,12,175,10],[153,13,175,11,"_currentSubscription"],[153,33,175,31],[153,36,175,34],[153,40,175,38],[154,6,176,4],[155,4,177,2],[156,4,178,2],[157,0,179,0],[158,0,180,0],[159,0,181,0],[160,0,182,0],[161,0,183,0],[162,0,184,0],[163,0,185,0],[164,0,186,0],[164,7,178,2],[165,4,189,2,"_proto"],[165,10,189,8],[165,11,189,9,"__emitToSubscription"],[165,31,189,29],[165,34,189,32],[165,43,189,41,"__emitToSubscription"],[165,63,189,61,"__emitToSubscription"],[165,64,189,62,"subscription"],[165,76,189,74],[165,78,189,76,"eventType"],[165,87,189,85],[165,89,189,87],[166,6,190,4],[166,10,190,8,"args"],[166,14,190,12],[166,17,190,15,"Array"],[166,22,190,20],[166,23,190,21,"prototype"],[166,32,190,30],[166,33,190,31,"slice"],[166,38,190,36],[166,39,190,37,"call"],[166,43,190,41],[166,44,190,42,"arguments"],[166,53,190,51],[166,55,190,53],[166,56,190,54],[166,57,190,55],[167,6,191,4,"subscription"],[167,18,191,16],[167,19,191,17,"listener"],[167,27,191,25],[167,28,191,26,"apply"],[167,33,191,31],[167,34,191,32,"subscription"],[167,46,191,44],[167,47,191,45,"context"],[167,54,191,52],[167,56,191,54,"args"],[167,60,191,58],[167,61,191,59],[168,4,192,2],[168,5,192,3],[169,4,194,2],[169,11,194,9,"BaseEventEmitter"],[169,27,194,25],[170,2,195,0],[170,3,195,1],[170,4,195,2],[170,5,195,3],[171,2,197,0,"module"],[171,8,197,6],[171,9,197,7,"exports"],[171,16,197,14],[171,19,197,17,"BaseEventEmitter"],[171,35,197,33],[172,0,197,34],[172,3]],"functionMap":{"names":["<global>","<anonymous>","BaseEventEmitter","addListener","once","addListener$argument_1","removeAllListeners","removeCurrentListener","listeners","subscriptions.filter.map$argument_0","emit","__emitToSubscription"],"mappings":"AAA;oCCmC;ECI;GDG;uBEmB;GFE;gBGa;uCCE;KDG;GHC;8BKU;GLE;iCMwB;GNI;qBOU;mFCK;KDE;GPC;gBSiB;GTmB;gCUY;GVG;CDG"},"hasCjsExports":true},"type":"js/module"}]}